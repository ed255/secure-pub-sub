Publish-Subscribe protocols, such as Message Queue Telemetry Transport (MQTT),
play a key role in enabling real-time multi-point to multi-point communications
for many emerging internet of things (IoT) applications. Recently, there has
been an interest in adding in-network processing capabilities to such
publish-subscribe systems to enable computation over real-time streams to
enable sensor fusion, compression, aggregation and anonymization, correlation
and other statistical analyses on sensor data.  However, unlike pure
publish-subscribe systems which can employ transport layer encryption
end-to-end, it is challenging to ensure confidentiality with traditional
in-network processing, particularly if the processing is done on an untrusted
third-party cloud server. We present the first-ever secure
publish-process-subscribe system, which utilizes Yao's garbled circuits in
conjunction with novel cryptographic and system techniques, to preserve the
confidentiality of computations. We built a full-fledged secure
publish-process-subscribe system using our cryptographic protocol as a
foundation and incoproating novel system techniques. Our evaluation of the
proposed system using several example IoT problems shows that our solution is
computationally efficient.
